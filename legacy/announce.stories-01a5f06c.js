System.register(["./index-0d1dee32.js","./lit-element-df6ed7db.js"],(function(e){"use strict";var n,s,t,i,a,o,r,u,c,l,d,b,m,g,p,y,h,v,f,w;return{setters:[function(e){n=e.v,s=e.w,t=e.h,i=e.l,a=e.n,o=e.o,r=e.j,u=e.x,c=e.y,l=e.z,d=e.A,b=e.B,m=e.C,g=e.D,p=e.E,y=e.F,h=e.G,v=e.H,f=e.I},function(e){w=e.L}],execute:function(){var S=2592e5;function x(e){console.log("_storageUtility) "+e)}function _(){var e=s(['<span class="cta"><a href="','">',"</a></span>"]);return _=function(){return e},e}function C(){var e=s([""]);return C=function(){return e},e}function k(){var e=s(["\n      ",'\n      <div class="announce-banner','" disabled="','">\n        <i class="material-icons">','</i>\n        <span class="message">',"</span>\n        ",'\n        <button type="button" @click="','">\n          <i class="material-icons">close</i>&nbsp;<span class="txtv">DISMISS</span>\n        </button>\n      </div>\n    ']);return k=function(){return e},e}function I(){var e=s(['\n  <style type="text/css">\n    /* site-specific code for primo\'s announce-banner.js - adds padding below the search bar */ \n    prm-search-bar { padding-bottom: var(--primo-announce-padding, 60px); }\n    .__xs prm-search-bar, .__sm prm-search-bar { padding-bottom: var(--primo-announce-padding-small, 68px); }\n  </style>\n']);return I=function(){return e},e}var T=n(I()),N=function(e){function s(){return i(this,s),a(this,o(s).apply(this,arguments))}return t(s,e),r(s,[{key:"createRenderRoot",value:function(){return this}},{key:"render",value:function(){var e=this,s="";switch(this.severity){case"success":s="check_circle";break;case"alert":s="announcement";break;case"warn":s="report_problem";break;case"info":default:s="info"}var t=this.message?this.message.replace(/&#39;/g,"'"):"this is a default message";return n(k(),!window.location.pathname.includes("primo-explore")||!this.debug&&this._getDismissedValue()?n(C()):T,null!=this.severity?" "+this.severity:"",this._getDismissedValue(),s,t,this.cta_url?n(_(),this.cta_url,this.cta_text):"",(function(n){return e._toggleDismissed()}))}},{key:"_getDismissedValue",value:function(){return this.hasAttribute("dismissed")?this.hasAttribute("dismissed")&&"false"!==this.getAttribute("dismissed"):function(e,n){var s=n||!1;try{var t=localStorage.getItem(e),i=localStorage.getItem(e+"-when");t&&i&&(Date.now()-i<S?(s="true"==localStorage.getItem(e),x("unexpired '".concat(e,"' value of '").concat(t,"' read from localStorage"))):(localStorage.removeItem(e),localStorage.removeItem(e+"-when"),x("expired '".concat(e,"*' values have been removed. will be sending fallback of '").concat(n,"'"))))}catch(t){x("exception trying to get item '".concat(e,"' from localStorage: '").concat(t.message,"'. returning fallback '").concat(n,"' instead")),s=n||!1}finally{return s}}(this._dismissedId(),!1)||!1}},{key:"_dismissedId",value:function(){var e="announcement-dismissed";try{e+="-"+this.code}catch(e){this._logToConsole("error slugifying message to get new id: "+e.message)}return e}},{key:"_toggleDismissed",value:function(){var e=this._getDismissedValue();this.setAttribute("dismissed",!e),this._logToConsole("dismiss clicked, session's' '".concat(this._dismissedId(),"' value '").concat(e,"'->'").concat(this._getDismissedValue(),"'")),this.requestUpdate(),function(e,n){try{localStorage.setItem(e,n),localStorage.setItem(e+"-when",Date.now()),x("key '".concat(e,"' successfully set to value '").concat(n,"'."))}catch(e){x("exception trying to setItem in localStorage: "+e.message)}}(this._dismissedId(),!e)}},{key:"_logToConsole",value:function(e){this.debug&&console.log("bulib-announce) "+e)}}],[{key:"properties",get:function(){return{code:{type:String},message:{type:String},cta_text:{type:String},cta_url:{type:String},severity:{type:String},dismissed:{type:Boolean,reflect:!0},debug:{type:Boolean},prevent_action:{type:Boolean}}}}]),s}(w);function M(){var e=s(['\n      <bulib-announce debug code="dismissed-present" dismissed message="\'dismissed\' is present, but unspecified"></bulib-announce> <hr />\n      <bulib-announce debug code="dismissed-true" dismissed="true" message="\'dismissed\' is present and set to \'true\'"></bulib-announce> <hr />\n      <bulib-announce debug code="dismissed-false" dismissed="false" message="\'dismissed\' is present and set to \'false\'"></bulib-announce>\n    ']);return M=function(){return e},e}function D(){var e=s(['\n      <bulib-announce debug severity="info" code="one"></bulib-announce> <hr />\n      <bulib-announce debug severity="warn" code="two"></bulib-announce> <hr />\n      <bulib-announce debug severity="alert" code="three"></bulib-announce> <hr />\n      <bulib-announce debug severity="success" code="four"></bulib-announce>\n    ']);return D=function(){return e},e}function A(){var e=s(['\n      <bulib-announce debug code="signin-cta" severity="info" message="Sign in to view \'My Favorites\'" \n        cta_text="Sign In" cta_url="https://www.bu.edu/library/account/"></bulib-announce>\n    ']);return A=function(){return e},e}function P(){var e=s(['\n      <bulib-announce debug code="severity-info" severity="info" message="Situation-independent information"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-success" severity="success" message="A user action has been completed or verified"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-warn" severity="warn" message="Something is wrong, but it\'s not an emergency"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-alert" severity="alert" message="Something is very wrong and needs immediate attention"></bulib-announce>\n    ']);return P=function(){return e},e}function j(){var e=s(["<bulib-announce debug></bulib-announce>"]);return j=function(){return e},e}function B(){var e=s(['\n      <bulib-announce debug code="dismissed-present" dismissed message="\'dismissed\' is present, but unspecified"></bulib-announce> <hr />\n      <bulib-announce debug code="dismissed-true" dismissed="true" message="\'dismissed\' is present and set to \'true\'"></bulib-announce> <hr />\n      <bulib-announce debug code="dismissed-false" dismissed="false" message="\'dismissed\' is present and set to \'false\'"></bulib-announce>\n    ']);return B=function(){return e},e}function F(){var e=s(['\n      <bulib-announce debug severity="info" code="one"></bulib-announce> <hr />\n      <bulib-announce debug severity="warn" code="two"></bulib-announce> <hr />\n      <bulib-announce debug severity="alert" code="three"></bulib-announce> <hr />\n      <bulib-announce debug severity="success" code="four"></bulib-announce>\n    ']);return F=function(){return e},e}function O(){var e=s(['\n      <bulib-announce debug code="signin-cta" severity="info" message="Sign in to view \'My Favorites\'" \n        cta_text="Sign In" cta_url="https://www.bu.edu/library/account/"></bulib-announce>\n    ']);return O=function(){return e},e}function U(){var e=s(['\n      <bulib-announce debug code="severity-info" severity="info" message="Situation-independent information"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-success" severity="success" message="A user action has been completed or verified"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-warn" severity="warn" message="Something is wrong, but it\'s not an emergency"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-alert" severity="alert" message="Something is very wrong and needs immediate attention"></bulib-announce>\n    ']);return U=function(){return e},e}function V(){var e=s(["<bulib-announce debug></bulib-announce>"]);return V=function(){return e},e}function E(){return(E=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e}).apply(this,arguments)}window.customElements.define("bulib-announce",N);var L={},R="wrapper";function W(e){var n=e.components,s=p(e,["components"]);return m(R,E({},L,s,{components:n,mdxType:"MDXLayout"}),m(y,{title:"Web Components|bulib-announce",decorators:[l,d],parameters:{component:"bulib-announce",options:{selectedPanel:"storybookjs/knobs/panel"}},mdxType:"Meta"}),m("h1",null,"Announcement Banner Component"),m("p",null,"Used to show site-wide, time-sensitive, dismissable chunk of information with varying severity, a prominent message,\nand a clear call to action."),m("h2",null,"Usages"),m("h3",null,"Default Component"),m("p",null,"by default, ",m("inlineCode",{parentName:"p"},"bulib-announce")," displays with a default message with an ",m("inlineCode",{parentName:"p"},"info"),"-level severity and no call to action"),m(h,{withToolbar:!0,mdxType:"Preview"},m(v,{name:"basic",mdxType:"Story"},c(V()))),m("h3",null,"Custom Message and Severity"),m("p",null,"Specifying a ",m("inlineCode",{parentName:"p"},"severity")," will alter its color and icon, and should be complimentary to the specified ",m("inlineCode",{parentName:"p"},"message"),"."),m(h,{withToolbar:!0,mdxType:"Preview"},m(v,{name:"custom-message-severity",mdxType:"Story"},c(U()))),m("h3",null,"Custom Calls-to-Actions"),m("p",null,"You can also specify a call-to-action text (",m("inlineCode",{parentName:"p"},"cta_text"),") and url (",m("inlineCode",{parentName:"p"},"cta_url"),"). "),m(h,{withToolbar:!0,mdxType:"Preview"},m(v,{name:"custom-signin-cta",mdxType:"Story"},c(O()))),m("h3",null,"Banner Dismissal"),m("p",null,"In order to not annoy the user (by presenting them with irrelevant or unwanted information), banner\nmessages can be hidden by being dismissed (by setting them to ",m("inlineCode",{parentName:"p"},"disabled"),")."),m("h4",null,"Session Memory (default)"),m("p",null,"By default, we try to remember which banners have and haven't been dismissed by using the ",m("inlineCode",{parentName:"p"},"src/_helpers/storageUtility"),",\nand look into the user's ",m("inlineCode",{parentName:"p"},"localStorage")," for the ",m("inlineCode",{parentName:"p"},"announce-dismissal")," for that specific ",m("inlineCode",{parentName:"p"},"code"),". "),m(h,{withToolbar:!0,mdxType:"Preview"},m(v,{name:"dismissed-memory",mdxType:"Story"},c(F()))),m("h4",null,"Manual Override"),m("p",null,"For debugging purposes, this can be done manually - in which case it will ",m("em",{parentName:"p"},"always")," be hidden (",m("inlineCode",{parentName:"p"},'dismissed="true"'),", ",m("inlineCode",{parentName:"p"},"dismissed"),")\nor ",m("em",{parentName:"p"},"always")," shown (",m("inlineCode",{parentName:"p"},'dismissed="false"'),") regardless of what's been saved in the local storage."),m(h,{withToolbar:!0,mdxType:"Preview"},m(v,{name:"dismissed-manual",mdxType:"Story"},c(B()))),m("p",null,m("em",{parentName:"p"},"NOTE: clicking the DISMISS button will immediately toggle the ",m("inlineCode",{parentName:"em"},"dismiss")," value for the banner, save that value in local storage, and switch that banner's dismissal to manual mode until page is reloaded")),m("h2",null,"API - Properties"),m(f,{of:"bulib-announce",mdxType:"Props"}))}W.isMDXComponent=!0;var X=e("basic",u(c(j())));X.story={},X.story.name="basic",X.story.parameters={mdxSource:"html`<bulib-announce debug></bulib-announce>`"};var q=e("customMessageSeverity",u(c(P())));q.story={},q.story.name="custom-message-severity",q.story.parameters={mdxSource:'html`\n      <bulib-announce debug code="severity-info" severity="info" message="Situation-independent information"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-success" severity="success" message="A user action has been completed or verified"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-warn" severity="warn" message="Something is wrong, but it\'s not an emergency"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-alert" severity="alert" message="Something is very wrong and needs immediate attention"></bulib-announce>\n    `'};var z=e("customSigninCta",u(c(A())));z.story={},z.story.name="custom-signin-cta",z.story.parameters={mdxSource:'html`\n      <bulib-announce debug code="signin-cta" severity="info" message="Sign in to view \'My Favorites\'" \n        cta_text="Sign In" cta_url="https://www.bu.edu/library/account/"></bulib-announce>\n    `'};var G=e("dismissedMemory",u(c(D())));G.story={},G.story.name="dismissed-memory",G.story.parameters={mdxSource:'html`\n      <bulib-announce debug severity="info" code="one"></bulib-announce> <hr />\n      <bulib-announce debug severity="warn" code="two"></bulib-announce> <hr />\n      <bulib-announce debug severity="alert" code="three"></bulib-announce> <hr />\n      <bulib-announce debug severity="success" code="four"></bulib-announce>\n    `'};var H=e("dismissedManual",u(c(M())));H.story={},H.story.name="dismissed-manual",H.story.parameters={mdxSource:'html`\n      <bulib-announce debug code="dismissed-present" dismissed message="\'dismissed\' is present, but unspecified"></bulib-announce> <hr />\n      <bulib-announce debug code="dismissed-true" dismissed="true" message="\'dismissed\' is present and set to \'true\'"></bulib-announce> <hr />\n      <bulib-announce debug code="dismissed-false" dismissed="false" message="\'dismissed\' is present and set to \'false\'"></bulib-announce>\n    `'};var Y={title:"Web Components|bulib-announce",parameters:{component:"bulib-announce",options:{selectedPanel:"storybookjs/knobs/panel"}},decorators:[l,d],includeStories:["basic","customMessageSeverity","customSigninCta","dismissedMemory","dismissedManual"]},J={basic:"web-components-bulib-announce--basic","custom-message-severity":"web-components-bulib-announce--custom-message-severity","custom-signin-cta":"web-components-bulib-announce--custom-signin-cta","dismissed-memory":"web-components-bulib-announce--dismissed-memory","dismissed-manual":"web-components-bulib-announce--dismissed-manual"};Y.parameters=Y.parameters||{},Y.parameters.docs=b({},Y.parameters.docs||{},{page:function(){return m(g,{mdxStoryNameToId:J},m(W,null))}}),e("default",Y)}}}));
//# sourceMappingURL=announce.stories-01a5f06c.js.map
