import{j as e,k as n,l as s,n as i,o as t,_ as a,q as o,s as r,u,v as l,w as d,x as c,y as b}from"./index-f3ebdc0e.js";import{L as m}from"./lit-element-44d69835.js";const g=2592e5;function p(e){console.log("_storageUtility) "+e)}const y=e`
  <style type="text/css">
    /* site-specific code for primo's announce-banner.js - adds padding below the search bar */ 
    prm-search-bar { padding-bottom: var(--primo-announce-padding, 60px); }
    .__xs prm-search-bar, .__sm prm-search-bar { padding-bottom: var(--primo-announce-padding-small, 68px); }
  </style>
`;function h(){return(h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}window.customElements.define("bulib-announce",class extends m{createRenderRoot(){return this}static get properties(){return{code:{type:String},message:{type:String},cta_text:{type:String},cta_url:{type:String},severity:{type:String},dismissed:{type:Boolean,reflect:!0},debug:{type:Boolean},prevent_action:{type:Boolean}}}render(){let n="";switch(this.severity){case"success":n="check_circle";break;case"alert":n="announcement";break;case"warn":n="report_problem";break;case"info":default:n="info"}let s=this.message?this.message.replace(/&#39;/g,"'"):"this is a default message";return e`
      ${!window.location.pathname.includes("primo-explore")||!this.debug&&this._getDismissedValue()?e``:y}
      <div class="announce-banner${null!=this.severity?" "+this.severity:""}" disabled="${this._getDismissedValue()}">
        <i class="material-icons">${n}</i>
        <span class="message">${s}</span>
        ${this.cta_url?e`<span class="cta"><a href="${this.cta_url}">${this.cta_text}</a></span>`:""}
        <button type="button" @click="${e=>this._toggleDismissed()}">
          <i class="material-icons">close</i>&nbsp;<span class="txtv">DISMISS</span>
        </button>
      </div>
    `}_getDismissedValue(){return this.hasAttribute("dismissed")?this.hasAttribute("dismissed")&&"false"!==this.getAttribute("dismissed"):function(e,n){let s=n||!1;try{let i=localStorage.getItem(e),t=localStorage.getItem(e+"-when");i&&t&&(Date.now()-t<g?(s="true"==localStorage.getItem(e),p(`unexpired '${e}' value of '${i}' read from localStorage`)):(localStorage.removeItem(e),localStorage.removeItem(e+"-when"),p(`expired '${e}*' values have been removed. will be sending fallback of '${n}'`)))}catch(i){p(`exception trying to get item '${e}' from localStorage: '${i.message}'. returning fallback '${n}' instead`),s=n||!1}finally{return s}}(this._dismissedId(),!1)||!1}_dismissedId(){let e="announcement-dismissed";try{e+="-"+this.code}catch(e){this._logToConsole("error slugifying message to get new id: "+e.message)}return e}_toggleDismissed(){let e=this._getDismissedValue();this.setAttribute("dismissed",!e),this._logToConsole(`dismiss clicked, session's' '${this._dismissedId()}' value '${e}'->'${this._getDismissedValue()}'`),this.requestUpdate(),function(e,n){try{localStorage.setItem(e,n),localStorage.setItem(e+"-when",Date.now()),p(`key '${e}' successfully set to value '${n}'.`)}catch(e){p("exception trying to setItem in localStorage: "+e.message)}}(this._dismissedId(),!e)}_logToConsole(e){this.debug&&console.log("bulib-announce) "+e)}});const v={},f="wrapper";function w(e){let{components:n}=e,a=u(e,["components"]);return o(f,h({},v,a,{components:n,mdxType:"MDXLayout"}),o(l,{title:"Web Components|bulib-announce",decorators:[i,t],parameters:{component:"bulib-announce",options:{selectedPanel:"storybookjs/knobs/panel"}},mdxType:"Meta"}),o("h1",null,"Announcement Banner Component"),o("p",null,"Used to show site-wide, time-sensitive, dismissable chunk of information with varying severity, a prominent message,\nand a clear call to action."),o("h2",null,"Usages"),o("h3",null,"Default Component"),o("p",null,"by default, ",o("inlineCode",{parentName:"p"},"bulib-announce")," displays with a default message with an ",o("inlineCode",{parentName:"p"},"info"),"-level severity and no call to action"),o(d,{withToolbar:!0,mdxType:"Preview"},o(c,{name:"basic",mdxType:"Story"},s`<bulib-announce debug></bulib-announce>`)),o("h3",null,"Custom Message and Severity"),o("p",null,"Specifying a ",o("inlineCode",{parentName:"p"},"severity")," will alter its color and icon, and should be complimentary to the specified ",o("inlineCode",{parentName:"p"},"message"),"."),o(d,{withToolbar:!0,mdxType:"Preview"},o(c,{name:"custom-message-severity",mdxType:"Story"},s`
      <bulib-announce debug code="severity-info" severity="info" message="Situation-independent information"></bulib-announce>
      <hr />
      <bulib-announce debug code="severity-success" severity="success" message="A user action has been completed or verified"></bulib-announce>
      <hr />
      <bulib-announce debug code="severity-warn" severity="warn" message="Something is wrong, but it's not an emergency"></bulib-announce>
      <hr />
      <bulib-announce debug code="severity-alert" severity="alert" message="Something is very wrong and needs immediate attention"></bulib-announce>
    `)),o("h3",null,"Custom Calls-to-Actions"),o("p",null,"You can also specify a call-to-action text (",o("inlineCode",{parentName:"p"},"cta_text"),") and url (",o("inlineCode",{parentName:"p"},"cta_url"),"). "),o(d,{withToolbar:!0,mdxType:"Preview"},o(c,{name:"custom-signin-cta",mdxType:"Story"},s`
      <bulib-announce debug code="signin-cta" severity="info" message="Sign in to view 'My Favorites'" 
        cta_text="Sign In" cta_url="https://www.bu.edu/library/account/"></bulib-announce>
    `)),o("h3",null,"Banner Dismissal"),o("p",null,"In order to not annoy the user (by presenting them with irrelevant or unwanted information), banner\nmessages can be hidden by being dismissed (by setting them to ",o("inlineCode",{parentName:"p"},"disabled"),")."),o("h4",null,"Session Memory (default)"),o("p",null,"By default, we try to remember which banners have and haven't been dismissed by using the ",o("inlineCode",{parentName:"p"},"src/_helpers/storageUtility"),",\nand look into the user's ",o("inlineCode",{parentName:"p"},"localStorage")," for the ",o("inlineCode",{parentName:"p"},"announce-dismissal")," for that specific ",o("inlineCode",{parentName:"p"},"code"),". "),o(d,{withToolbar:!0,mdxType:"Preview"},o(c,{name:"dismissed-memory",mdxType:"Story"},s`
      <bulib-announce debug severity="info" code="one"></bulib-announce> <hr />
      <bulib-announce debug severity="warn" code="two"></bulib-announce> <hr />
      <bulib-announce debug severity="alert" code="three"></bulib-announce> <hr />
      <bulib-announce debug severity="success" code="four"></bulib-announce>
    `)),o("h4",null,"Manual Override"),o("p",null,"For debugging purposes, this can be done manually - in which case it will ",o("em",{parentName:"p"},"always")," be hidden (",o("inlineCode",{parentName:"p"},'dismissed="true"'),", ",o("inlineCode",{parentName:"p"},"dismissed"),")\nor ",o("em",{parentName:"p"},"always")," shown (",o("inlineCode",{parentName:"p"},'dismissed="false"'),") regardless of what's been saved in the local storage."),o(d,{withToolbar:!0,mdxType:"Preview"},o(c,{name:"dismissed-manual",mdxType:"Story"},s`
      <bulib-announce debug code="dismissed-present" dismissed message="'dismissed' is present, but unspecified"></bulib-announce> <hr />
      <bulib-announce debug code="dismissed-true" dismissed="true" message="'dismissed' is present and set to 'true'"></bulib-announce> <hr />
      <bulib-announce debug code="dismissed-false" dismissed="false" message="'dismissed' is present and set to 'false'"></bulib-announce>
    `)),o("p",null,o("em",{parentName:"p"},"NOTE: clicking the DISMISS button will immediately toggle the ",o("inlineCode",{parentName:"em"},"dismiss")," value for the banner, save that value in local storage, and switch that banner's dismissal to manual mode until page is reloaded")),o("h2",null,"API - Properties"),o(b,{of:"bulib-announce",mdxType:"Props"}))}w.isMDXComponent=!0;const S=n(s`<bulib-announce debug></bulib-announce>`);S.story={},S.story.name="basic",S.story.parameters={mdxSource:"html`<bulib-announce debug></bulib-announce>`"};const x=n(s`
      <bulib-announce debug code="severity-info" severity="info" message="Situation-independent information"></bulib-announce>
      <hr />
      <bulib-announce debug code="severity-success" severity="success" message="A user action has been completed or verified"></bulib-announce>
      <hr />
      <bulib-announce debug code="severity-warn" severity="warn" message="Something is wrong, but it's not an emergency"></bulib-announce>
      <hr />
      <bulib-announce debug code="severity-alert" severity="alert" message="Something is very wrong and needs immediate attention"></bulib-announce>
    `);x.story={},x.story.name="custom-message-severity",x.story.parameters={mdxSource:'html`\n      <bulib-announce debug code="severity-info" severity="info" message="Situation-independent information"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-success" severity="success" message="A user action has been completed or verified"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-warn" severity="warn" message="Something is wrong, but it\'s not an emergency"></bulib-announce>\n      <hr />\n      <bulib-announce debug code="severity-alert" severity="alert" message="Something is very wrong and needs immediate attention"></bulib-announce>\n    `'};const _=n(s`
      <bulib-announce debug code="signin-cta" severity="info" message="Sign in to view 'My Favorites'" 
        cta_text="Sign In" cta_url="https://www.bu.edu/library/account/"></bulib-announce>
    `);_.story={},_.story.name="custom-signin-cta",_.story.parameters={mdxSource:'html`\n      <bulib-announce debug code="signin-cta" severity="info" message="Sign in to view \'My Favorites\'" \n        cta_text="Sign In" cta_url="https://www.bu.edu/library/account/"></bulib-announce>\n    `'};const C=n(s`
      <bulib-announce debug severity="info" code="one"></bulib-announce> <hr />
      <bulib-announce debug severity="warn" code="two"></bulib-announce> <hr />
      <bulib-announce debug severity="alert" code="three"></bulib-announce> <hr />
      <bulib-announce debug severity="success" code="four"></bulib-announce>
    `);C.story={},C.story.name="dismissed-memory",C.story.parameters={mdxSource:'html`\n      <bulib-announce debug severity="info" code="one"></bulib-announce> <hr />\n      <bulib-announce debug severity="warn" code="two"></bulib-announce> <hr />\n      <bulib-announce debug severity="alert" code="three"></bulib-announce> <hr />\n      <bulib-announce debug severity="success" code="four"></bulib-announce>\n    `'};const T=n(s`
      <bulib-announce debug code="dismissed-present" dismissed message="'dismissed' is present, but unspecified"></bulib-announce> <hr />
      <bulib-announce debug code="dismissed-true" dismissed="true" message="'dismissed' is present and set to 'true'"></bulib-announce> <hr />
      <bulib-announce debug code="dismissed-false" dismissed="false" message="'dismissed' is present and set to 'false'"></bulib-announce>
    `);T.story={},T.story.name="dismissed-manual",T.story.parameters={mdxSource:'html`\n      <bulib-announce debug code="dismissed-present" dismissed message="\'dismissed\' is present, but unspecified"></bulib-announce> <hr />\n      <bulib-announce debug code="dismissed-true" dismissed="true" message="\'dismissed\' is present and set to \'true\'"></bulib-announce> <hr />\n      <bulib-announce debug code="dismissed-false" dismissed="false" message="\'dismissed\' is present and set to \'false\'"></bulib-announce>\n    `'};const I={title:"Web Components|bulib-announce",parameters:{component:"bulib-announce",options:{selectedPanel:"storybookjs/knobs/panel"}},decorators:[i,t],includeStories:["basic","customMessageSeverity","customSigninCta","dismissedMemory","dismissedManual"]},$={basic:"web-components-bulib-announce--basic","custom-message-severity":"web-components-bulib-announce--custom-message-severity","custom-signin-cta":"web-components-bulib-announce--custom-signin-cta","dismissed-memory":"web-components-bulib-announce--dismissed-memory","dismissed-manual":"web-components-bulib-announce--dismissed-manual"};I.parameters=I.parameters||{},I.parameters.docs=a({},I.parameters.docs||{},{page:()=>o(r,{mdxStoryNameToId:$},o(w,null))});export default I;export{S as basic,x as customMessageSeverity,_ as customSigninCta,T as dismissedManual,C as dismissedMemory};
//# sourceMappingURL=announce.stories-e10d3d87.js.map
